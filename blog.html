<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link
            href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Spectral&display=swap"
            rel="stylesheet"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Kelly+Slab&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap"
            rel="stylesheet"
        />
        <title>Блог | Сыр&Ко</title>
        <link rel="stylesheet" href="styles/blog.css" />
    </head>
    <body>
    <header>
      <a href="index.html" class="logo">Сыр & Ко</a>
      <nav>
        <a href="catalog.html">Каталог</a>
        <a href="sell.html">Акции</a>
        <a href="blog.html">Блог</a>
        <a href="contacts.html">Контакты</a>
      </nav>
    </header>
      <style>
    h1 {
        text-align: center;
    }
</style>
<main>
    
    <h1>Блог о сыре</h1>
    <div class="blog-container" id="blog-container"></div>
    <button
        class="show-more-btn"
        id="showMoreBtn"
        aria-label="Показать все статьи"
    >
        Показать все статьи
    </button>
</main> 

         <footer>
            <div class="footer-block">
                <div class="logo">Сыр & Ко</div>
                <div class="social-icons">
                    <a href="tel:+79262227122"
                        ><img src="image (1).png" alt="phone"
                    /></a>
                    <a href="https://vk.com/yourcompany" target="_blank"
                        ><img src="image (2).png" alt="vk"
                    /></a>
                    <a href="https://t.me/yourcompany" target="_blank"
                        ><img src="image (3).png" alt="telegram"
                    /></a>
                </div>
            </div>

            <div class="footer-divider"></div>

            <div class="footer-block">
                <p>
                    <strong>Адрес:</strong><br />Красноярск, ул. Щорса, 49<br />10:00
                    – 22:00
                </p>
            </div>

            <div class="footer-divider"></div>

            <div class="footer-block">
                <p>
                    <strong>Контакты:</strong><br />+7 (926) 222-71-22<br />yoprosi@gmail.com<br />ИНН:
                    212340344883473
                </p>
            </div>
        </footer>


        <button id="backToTop" aria-label="Наверх ↑">Наверх ↑</button>

        <!-- Модалка -->
        <div
            id="modal"
            class="modal"
            onclick="if(event.target===this)closeModal()"
        >
            <div
                class="modal-content"
                role="dialog"
                aria-modal="true"
                aria-labelledby="modal-title"
            >
                <span
                    class="close-btn"
                    role="button"
                    tabindex="0"
                    aria-label="Закрыть"
                    onclick="closeModal()"
                    >×</span
                >
                <img id="modal-img" class="modal-image" src="" alt="" />
                <h2 id="modal-title"></h2>
                <p id="modal-text"></p>
            </div>
        </div>

        <script>
            const blogData = [
                {
                    id: "a1",
                    type: "image",
                    src: "https://avatars.mds.yandex.net/i?id=c4bf102807014b50ea23192745c287d4_l-12483974-images-thumbs&n=13",
                    title: "Происхождение камамбера",
                    date: "01.06.2025",
                    text: "Камамбер родом из Нормандии. Этот сыр стал символом Франции благодаря уникальной текстуре и вкусу.",
                },
                {
                    id: "a2",
                    type: "video",
                    src: "как сочетать.mp4",
                    title: "Сыр и вино: как сочетать",
                    date: "02.06.2025",
                    text: "Советы сомелье о выборе идеального сыра к белым и красным винам. Мягкие и твердые сорта, сладкие и сухие пары.",
                },
                {
                    id: "a3",
                    type: "image",
                    src: "https://avatars.mds.yandex.net/i?id=c3ad33a3be1770907d37c4722bec8cf0_l-5210262-images-thumbs&n=13",
                    title: "Чеддер: король бутербродов",
                    date: "03.06.2025",
                    text: "Чеддер — английская классика. С насыщенным вкусом, он прекрасно подходит к сэндвичам и фондю.",
                },
                {
                    id: "a4",
                    type: "image",
                    src: "https://www.ferra.ru/imgs/2023/10/15/19/6180391/4e559551014867187f7da1159593f252a3a8c42d.jpg",
                    title: "Голубой сыр: на любителя?",
                    date: "04.06.2025",
                    text: "Сыры с плесенью — сильные и пряные. Поговорим, как их подают и с чем лучше есть.",
                },
                {
                    id: "a5",
                    type: "video",
                    src: "ферма.mp4",
                    title: "Как делают сыр на ферме",
                    date: "05.06.2025",
                    text: "Заглянем на сыроварню. От молока до полки — путь сыра за 5 минуты.",
                },
                {
                    id: "a6",
                    type: "image",
                    src: "https://avatars.mds.yandex.net/i?id=4d056c793da71f117e1467fd0164c7f7_l-9069926-images-thumbs&n=13",
                    title: "Пармезан: итальянский классик",
                    date: "06.06.2025",
                    text: "Пармезан — сыр с историей. Идеален для пасты, салатов и закусок.",
                },
                {
                    id: "a7",
                    type: "image",
                    src: "https://i1.wp.com/chem-polezno.com/img/kozij-syr-3.jpg",
                    title: "Козий сыр: полезные свойства",
                    date: "07.06.2025",
                    text: "Легкий и ароматный козий сыр — отличный выбор для диетического питания.",
                },
                {
                    id: "a8",
                    type: "video",
                    src: "дег.mp4",
                    title: "Дегустация сыров: советы",
                    date: "08.06.2025",
                    text: "Как правильно дегустировать сыр, чтобы раскрыть все нотки вкуса и аромата.",
                },
                {
                    id: "a9",
                    type: "image",
                    src: "https://avatars.dzeninfra.ru/get-zen_doc/1863556/pub_5de20268fbe6e700b04a40ea_5de206a904af1f00b270638f/scale_1200",
                    title: "Бри: сыр королей",
                    date: "09.06.2025",
                    text: "Мягкий сыр с белой корочкой — фаворит во французских королевских домах.",
                },
                {
                    id: "a10",
                    type: "image",
                    src: "https://i.pinimg.com/736x/7c/8f/1f/7c8f1f9374452c0a3d2b09dd2111021b.jpg",
                    title: "Фета: греческая классика",
                    date: "10.06.2025",
                    text: "Сыр из овечьего молока, часто используемый в салатах и горячих блюдах.",
                },
                {
                    id: "a11",
                    type: "video",
                    src: "дег.mp4",
                    title: "Фестиваль сыра в Швейцарии",
                    date: "11.06.2025",
                    text: "Традиции и новинки сыроварения на ежегодном фестивале.",
                },
                {
                    id: "a12",
                    type: "image",
                    src: "https://i.pinimg.com/originals/6f/c9/3f/6fc93fda2e6b9a3d3222ea4c9d5f52f6.png",
                    title: "Эмменталь: сыр с дырками",
                    date: "12.06.2025",
                    text: "Легкий и нежный швейцарский сыр, знаменитый своими отверстиями.",
                },
                {
                    id: "a13",
                    type: "image",
                    src: "https://avatars.mds.yandex.net/i?id=d312fd50c75390b8bafd5465b9d2a52d_l-5476469-images-thumbs&n=13",
                    title: "Раклет: сыр для гриля",
                    date: "13.06.2025",
                    text: "Идеален для расплавления, подается горячим с картофелем.",
                },
                {
                    id: "a14",
                    type: "video",
                    src: "ферма.mp4",
                    title: "Артисанальные сыры",
                    date: "14.06.2025",
                    text: "Маленькие сыроварни и их уникальные рецепты.",
                },
                {
                    id: "a15",
                    type: "image",
                    src: "https://avatars.mds.yandex.net/i?id=4b596fc8e8d78b7f720b0e7ff54a60e7_l-5714482-images-thumbs&n=13",
                    title: "Моцарелла: свежесть Италии",
                    date: "15.06.2025",
                    text: "Сыр из буйволиного молока, незаменимый в пицце и салатах.",
                },
            ];

            const container = document.getElementById("blog-container");
            const showMoreBtn = document.getElementById("showMoreBtn");
            const backToTopBtn = document.getElementById("backToTop");

            const LIKES_KEY = "cheeseBlogLikes";
            let likesData = JSON.parse(localStorage.getItem(LIKES_KEY)) || {};
            let showingAll = false;

            function saveLikes() {
                localStorage.setItem(LIKES_KEY, JSON.stringify(likesData));
            }

            function renderArticles() {
                container.innerHTML = "";
                const articlesToShow = showingAll
                    ? blogData
                    : blogData.slice(0, 6);

                articlesToShow.forEach((article) => {
                    const card = document.createElement("div");
                    card.className = "blog-card";

                    if (article.type === "image") {
                        card.innerHTML = `
          <img src="${article.src}" alt="${article.title}" loading="lazy" />
          <div class="blog-content">
            <h3>${article.title}</h3>
            <div class="date">${article.date}</div>
            <button class="like-btn" aria-label="Нравится" data-id="${
                article.id
            }">${likesData[article.id] ? "🧀❤️" : "🧀"}</button>
            <span class="read-more" tabindex="0" data-id="${
                article.id
            }">Читать</span>
          </div>
        `;
                    } else if (article.type === "video") {
                        card.innerHTML = `
          <video src="${article.src}" controls muted preload="metadata"></video>
          <div class="blog-content">
            <h3>${article.title}</h3>
            <div class="date">${article.date}</div>
            <button class="like-btn" aria-label="Нравится" data-id="${
                article.id
            }">${likesData[article.id] ? "🧀❤️" : "🧀"}</button>
            <span class="read-more" tabindex="0" data-id="${
                article.id
            }">Читать</span>
          </div>
        `;
                    }

                    container.appendChild(card);
                });

                document.querySelectorAll(".like-btn").forEach((btn) => {
                    btn.addEventListener("click", () => {
                        const id = btn.getAttribute("data-id");
                        if (likesData[id]) {
                            delete likesData[id];
                            btn.textContent = "🧀";
                        } else {
                            likesData[id] = true;
                            btn.textContent = "🧀❤️";
                        }
                        saveLikes();
                    });
                });

                document.querySelectorAll(".read-more").forEach((link) => {
                    link.addEventListener("click", () =>
                        openModalById(link.getAttribute("data-id"))
                    );
                    link.addEventListener("keypress", (e) => {
                        if (e.key === "Enter")
                            openModalById(link.getAttribute("data-id"));
                    });
                });
            }

            // Модалка
            const modal = document.getElementById("modal");
            const modalImg = document.getElementById("modal-img");
            const modalTitle = document.getElementById("modal-title");
            const modalText = document.getElementById("modal-text");
            const closeBtn = modal.querySelector(".close-btn");

            function openModal(article) {
                modal.style.display = "block";
                modalTitle.textContent = article.title;
                modalText.textContent = article.text;
                if (article.type === "image") {
                    modalImg.src = article.src;
                    modalImg.alt = article.title;
                    modalImg.style.display = "block";
                } else if (article.type === "video") {
                    modalImg.style.display = "none";
                }
            }

            function openModalById(id) {
                const article = blogData.find((a) => a.id === id);
                if (article) openModal(article);
            }

            function closeModal() {
                modal.style.display = "none";
            }

            closeBtn.addEventListener("click", closeModal);
            window.addEventListener("keydown", (e) => {
                if (e.key === "Escape") closeModal();
            });

            backToTopBtn.addEventListener("click", () => {
                window.scrollTo({ top: 0, behavior: "smooth" });
            });

            window.addEventListener("scroll", () => {
                const scrollTop = window.scrollY;

                if (scrollTop > 100) {
                    showMoreBtn.classList.add("visible");
                } else {
                    showMoreBtn.classList.remove("visible");
                }

                if (scrollTop > 300) {
                    backToTopBtn.classList.add("visible");
                } else {
                    backToTopBtn.classList.remove("visible");
                }
            });

            showMoreBtn.addEventListener("click", () => {
                showingAll = !showingAll;
                showMoreBtn.textContent = showingAll
                    ? "Скрыть все статьи"
                    : "Показать все статьи";
                renderArticles();
                container.scrollIntoView({
                    behavior: "smooth",
                    block: "start",
                });
            });

            renderArticles();
        </script>
    </body>
</html>
